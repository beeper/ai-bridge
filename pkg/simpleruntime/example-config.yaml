# Connector-specific configuration under `network:`.

beeper:
  base_url: ""
  token: ""

providers:
  beeper:
    default_model: "anthropic/claude-opus-4.6"
    default_pdf_engine: "mistral-ocr"
  openai:
    api_key: ""
    base_url: "https://api.openai.com/v1"
    default_model: "openai/gpt-5.2"
  openrouter:
    api_key: ""
    base_url: "https://openrouter.ai/api/v1"
    default_model: "anthropic/claude-opus-4.6"
    default_pdf_engine: "mistral-ocr"

default_system_prompt: |
  You are a helpful, concise assistant.
  Ask clarifying questions when needed.
  Follow the user's intent and be accurate.

model_cache_duration: 6h

bridge:
  log_ephemeral_events: false

messages:
  responsePrefix: ""
  directChat:
    historyLimit: 20
  groupChat:
    historyLimit: 50
  queue:
    mode: "collect"
    debounceMs: 1000
    cap: 20
    drop: "summarize"

commands:
  ownerAllowFrom: []

channels:
  matrix:
    responsePrefix: ""

session:
  scope: "per-sender"
  mainKey: "main"
  store: ""

tools:
  search:
    provider: "openrouter"
    fallbacks: ["exa", "brave", "perplexity"]
    exa:
      api_key: ""
      base_url: "https://api.exa.ai"
      type: "auto"
      num_results: 5
      include_text: false
      text_max_chars: 500
      highlights: true
    brave:
      api_key: ""
      base_url: "https://api.search.brave.com/res/v1/web/search"
    perplexity:
      api_key: ""
      base_url: "https://openrouter.ai/api/v1"
      model: "perplexity/sonar-pro"
    openrouter:
      api_key: ""
      base_url: "https://openrouter.ai/api/v1"
      model: "openai/gpt-5.2"
  fetch:
    provider: "exa"
    fallbacks: ["direct"]
    exa:
      api_key: ""
      base_url: "https://api.exa.ai"
      include_text: true
      text_max_chars: 5000
    direct:
      enabled: true
      timeout_seconds: 30
      max_chars: 50000
      max_redirects: 3
  vfs:
    apply_patch:
      enabled: false
      allow_models: []
  media:
    concurrency: 2
    image:
      enabled: true
      prompt: "Describe the image."
      maxBytes: 10485760
      maxChars: 500
      timeoutSeconds: 60
      models:
        - provider: "openrouter"
          model: "google/gemini-3-flash-preview"
    audio:
      enabled: true
      prompt: "Transcribe the audio."
      language: ""
      maxBytes: 20971520
      timeoutSeconds: 60
      models:
        - provider: "openai"
          model: "gpt-4o-mini-transcribe"
    video:
      enabled: true
      prompt: "Describe the video."
      maxBytes: 52428800
      timeoutSeconds: 120
      models:
        - provider: "openrouter"
          model: "google/gemini-3-flash-preview"

pruning:
  mode: "cache-ttl"
  ttl: "1h"
  enabled: true
  soft_trim_ratio: 0.3
  hard_clear_ratio: 0.5
  keep_last_assistants: 3
  min_prunable_chars: 50000
  soft_trim_max_chars: 4000
  soft_trim_head_chars: 1500
  soft_trim_tail_chars: 1500
  hard_clear_enabled: true
  hard_clear_placeholder: "[Old tool result content cleared]"
  summarization_enabled: true
  summarization_model: "openai/gpt-5.2"
  max_summary_tokens: 500
  max_history_share: 0.5
  reserve_tokens: 20000

link_previews:
  enabled: true
  max_urls_inbound: 3
  max_urls_outbound: 5
  fetch_timeout: 10s
  max_content_chars: 500
  max_page_bytes: 10485760
  max_image_bytes: 5242880
  cache_ttl: 1h
